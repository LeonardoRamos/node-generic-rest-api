{"version":3,"sources":["src/api/helpers/query.builder.js"],"names":["Op","Sequelize","buildQuery","model","requestQuery","queryParser","parseRequestSymbols","nestedModels","getNestedModels","query","buildWhereQuery","filter","buildProjections","projection","buildIncludes","buildGroupBy","groupBy","buildOrder","sort","limit","getLimit","offset","getOffset","console","log","originalModel","associations","Object","keys","forEach","key","target","include","associationInclude","as","push","name","currentJoin","length","childJoin","modelAlias","projections","parseSeletor","projectionModels","i","modelName","getFieldModelName","getSignificantField","attributes","groupByFields","nestedModel","getNestedModel","field","group","orderFields","parseSortOrder","order","ield","sortOrder","currentExpression","parseFilterExpressions","filterField","fieldModel","getFieldModel","where","logicOperator","LogicOperator","OR","conjunctionQuery","buildPredicate","filterExpression","or","concat","fieldModelName","nestedModelFound","find","nested","models","value","buildWhereCondition","columnField","getColumnField","filterOperator","FilterOperator","IN","in","split","map","val","trim","OU","notIn","GE","ge","GT","gt","LE","le","LT","lt","NE","ne","LK","iLike","EQ","eq","getAllModelFields","fieldNames","modelFields","fieldRawAttributesMap","modelField","fieldName","fullPathField","originalColumnField","splittedFullPathField","splice","join","fields"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;AAEA,IAAMA,KAAKC,oBAAUD,EAArB;;AAEA,SAASE,UAAT,CAAoBC,KAApB,EAA2BC,YAA3B,EAAyC;AACrCA,mBAAeC,gBAAYC,mBAAZ,CAAgCF,YAAhC,CAAf;;AAEA,QAAIG,eAAeC,gBAAgBL,KAAhB,CAAnB;;AAEA,QAAIM,QAAQC,gBAAgBN,aAAaO,MAA7B,EAAqCR,KAArC,EAA4CI,YAA5C,CAAZ;AACAE,yBAAaA,KAAb,EAAuBG,iBAAiBR,aAAaS,UAA9B,CAAvB;AACAJ,yBAAaA,KAAb,EAAuBK,cAAcV,YAAd,EAA4BD,KAA5B,EAAmCA,KAAnC,CAAvB;AACA;AACAM,yBAAaA,KAAb,EAAuBM,aAAaX,aAAaY,OAA1B,EAAmCb,KAAnC,EAA0CI,YAA1C,CAAvB;AACAE,yBAAaA,KAAb,EAAuBQ,WAAWb,aAAac,IAAxB,EAA8Bf,KAA9B,EAAqCI,YAArC,CAAvB;;AAEAE,UAAMU,KAAN,GAAcd,gBAAYe,QAAZ,CAAqBhB,YAArB,CAAd;AACAK,UAAMY,MAAN,GAAehB,gBAAYiB,SAAZ,CAAsBlB,YAAtB,CAAf;;AAEAmB,YAAQC,GAAR,CAAYf,KAAZ;;AAEA,WAAOA,KAAP;AACH;;AAED,SAASK,aAAT,CAAuBV,YAAvB,EAAqCD,KAArC,EAA4CsB,aAA5C,EAAuE;AAAA,QAAZhB,KAAY,uEAAJ,EAAI;;AACnE,QAAIN,MAAMuB,YAAV,EAAwB;AACpBC,eAAOC,IAAP,CAAYzB,MAAMuB,YAAlB,EAAgCG,OAAhC,CAAwC,UAACC,GAAD,EAAS;AAC7C,gBAAI3B,MAAMuB,YAAN,CAAmBI,GAAnB,EAAwBC,MAA5B,EAAoC;AAChCtB,sBAAMuB,OAAN,GAAgB,EAAhB;;AAEA,oBAAIC,qBAAqB;AACrB9B,2BAAOA,MAAMuB,YAAN,CAAmBI,GAAnB,EAAwBC,MADV;AAErBG,wBAAIJ;AAFiB,iBAAzB;AAIAG,kDAA0BA,kBAA1B,EAAiDrB,iBAAiBR,aAAaS,UAA9B,EAA0CiB,GAA1C,CAAjD;;AAEArB,sBAAMuB,OAAN,CAAcG,IAAd,CAAmBF,kBAAnB;;AAEA,oBAAI,CAACR,aAAD,IAAmBtB,MAAMuB,YAAN,CAAmBI,GAAnB,EAAwBC,MAAxB,CAA+BK,IAA/B,KAAwCX,cAAcW,IAA7E,EAAoF;AAChF,wBAAIC,cAAc5B,MAAMuB,OAAN,CAAcvB,MAAMuB,OAAN,CAAcM,MAAd,GAAuB,CAArC,CAAlB;AACA,wBAAIC,YAAYzB,cAAcV,YAAd,EAA4BD,MAAMuB,YAAN,CAAmBI,GAAnB,EAAwBC,MAApD,EAA4D5B,KAA5D,EAAmEkC,WAAnE,CAAhB;;AAEA5B,0BAAMuB,OAAN,CAAcvB,MAAMuB,OAAN,CAAcM,MAAd,GAAuB,CAArC,iBAA+CD,WAA/C,EAA+DE,SAA/D;AACH;AACJ;AACJ,SAnBD;AAoBH;;AAED,WAAO9B,KAAP;AACH;;AAED,SAASG,gBAAT,CAA0BC,UAA1B,EAAyD;AAAA,QAAnB2B,UAAmB,uEAAN,IAAM;;AACrD,QAAIC,cAAcpC,gBAAYqC,YAAZ,CAAyB7B,UAAzB,CAAlB;AACA,QAAIJ,QAAQ,EAAZ;;AAEA,QAAIgC,YAAYH,MAAZ,KAAuB,CAA3B,EAA8B;AAC1B,eAAO7B,KAAP;AACH;;AAED,QAAIkC,mBAAmB,EAAvB;;AAEA,SAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAIH,YAAYH,MAAhC,EAAwCM,GAAxC,EAA6C;AACzC,YAAIC,YAAYC,kBAAkBL,YAAYG,CAAZ,CAAlB,CAAhB;AACAD,yBAAiBE,SAAjB,IAA8BF,iBAAiBE,SAAjB,KAA+B,EAA7D;AACAF,yBAAiBE,SAAjB,EAA4BV,IAA5B,CAAiCY,oBAAoBN,YAAYG,CAAZ,CAApB,CAAjC;AACH;;AAED,QAAID,iBAAiBH,UAAjB,CAAJ,EAAkC;AAC9B/B,cAAMuC,UAAN,GAAmBL,iBAAiBH,UAAjB,CAAnB;AAEH,KAHD,MAGO,IAAIb,OAAOC,IAAP,CAAYe,gBAAZ,EAA8BL,MAA9B,GAAuC,CAA3C,EAA8C;AACjD7B,cAAMuC,UAAN,GAAmB,EAAnB;AACH;;AAED,WAAOvC,KAAP;AACH;;AAED,SAASM,YAAT,CAAsBC,OAAtB,EAA+Bb,KAA/B,EAAsCI,YAAtC,EAAoD;AAChD,QAAI0C,gBAAgB5C,gBAAYqC,YAAZ,CAAyB1B,OAAzB,CAApB;AACA,QAAIP,QAAQ,EAAZ;;AAEA,SAAK,IAAImC,IAAI,CAAb,EAAgBA,IAAIK,cAAcX,MAAlC,EAA0CM,GAA1C,EAA+C;AAC3C,YAAIM,cAAcC,eAAe5C,YAAf,EAA6B0C,cAAcL,CAAd,CAA7B,CAAlB;AACA,YAAIQ,QAAQL,oBAAoBE,cAAcL,CAAd,CAApB,CAAZ;;AAEAnC,cAAM4C,KAAN,GAAc5C,MAAM4C,KAAN,IAAe,EAA7B;;AAEA,YAAIH,gBAAgB,IAApB,EAA0B;AACtBzC,kBAAM4C,KAAN,CAAYlB,IAAZ,CAAiB,CAAEhC,KAAF,EAASiD,KAAT,CAAjB;AACH,SAFD,MAEO;AACH3C,kBAAM4C,KAAN,CAAYlB,IAAZ,CAAiB,CAAEe,WAAF,EAAeE,KAAf,CAAjB;AACH;AACJ;;AAED,WAAO3C,KAAP;AACH;;AAED,SAASQ,UAAT,CAAoBC,IAApB,EAA0Bf,KAA1B,EAAiCI,YAAjC,EAA+C;AAC3C,QAAI+C,cAAcjD,gBAAYkD,cAAZ,CAA2BrC,IAA3B,CAAlB;AACA,QAAIT,QAAQ,EAAZ;;AAEA,SAAK,IAAImC,IAAI,CAAb,EAAgBA,IAAIU,YAAYhB,MAAhC,EAAwCM,GAAxC,EAA6C;AACzC,YAAIM,cAAcC,eAAe5C,YAAf,EAA6B+C,YAAYV,CAAZ,EAAeQ,KAA5C,CAAlB;AACA,YAAIA,QAAQL,oBAAoBO,YAAYV,CAAZ,EAAeQ,KAAnC,CAAZ;;AAEA3C,cAAM+C,KAAN,GAAc/C,MAAM+C,KAAN,IAAe,EAA7B;;AAEA,YAAIN,gBAAgB,IAApB,EAA0B;AACtBzC,kBAAM+C,KAAN,CAAYrB,IAAZ,CAAiB,CAAEhC,KAAF,EAASsD,IAAT,EAAeH,YAAYV,CAAZ,EAAec,SAAf,CAAyBF,KAAxC,CAAjB;AACH,SAFD,MAEO;AACH/C,kBAAM+C,KAAN,CAAYrB,IAAZ,CAAiB,CAAEe,WAAF,EAAeE,KAAf,EAAsBE,YAAYV,CAAZ,EAAec,SAAf,CAAyBF,KAA/C,CAAjB;AACH;AACJ;;AAED,WAAO/C,KAAP;AACH;;AAED,SAASC,eAAT,CAAyBC,MAAzB,EAAiCR,KAAjC,EAAwCI,YAAxC,EAAsD;AAClD,QAAIoD,oBAAoBtD,gBAAYuD,sBAAZ,CAAmCjD,MAAnC,CAAxB;AACA,QAAIF,QAAQ,EAAZ;;AAEA,WAAOkD,sBAAsB,IAAtB,IAA8BhC,OAAOC,IAAP,CAAY+B,iBAAZ,EAA+BrB,MAA/B,GAAwC,CAA7E,EAAgF;;AAE5E,YAAIqB,kBAAkBE,WAAlB,KAAkC,IAAtC,EAA4C;AACxC,gBAAIC,aAAaC,cAAc5D,KAAd,EAAqBI,YAArB,EAAmCoD,kBAAkBE,WAAlB,CAA8BT,KAAjE,CAAjB;;AAEA3C,kBAAMuD,KAAN,GAAcvD,MAAMuD,KAAN,IAAe,EAA7B;;AAEA,gBAAIL,kBAAkBM,aAAlB,IAAmCC,wBAAcC,EAAd,CAAiB/B,IAAjB,KAA0BuB,kBAAkBM,aAAlB,CAAgC7B,IAAjG,EAAuG;AACnG,oBAAIgC,mBAAmB,EAAvB;;AAEA,mBAAG;AACCA,qCAAiBjC,IAAjB,CAAsBkC,eAAeV,kBAAkBE,WAAjC,EAA8CC,UAA9C,CAAtB;AACAH,wCAAoBA,kBAAkBW,gBAAtC;AAEH,iBAJD,QAISX,sBAAsB,IAAtB,IAA8BO,wBAAcC,EAAd,CAAiB/B,IAAjB,KAA0BuB,kBAAkBM,aAAlB,CAAgC7B,IAJjG;;AAMA,oBAAIuB,sBAAsB,IAAtB,IAA8BA,kBAAkBE,WAAlB,KAAkC,IAApE,EAA0E;AACtEO,qCAAiBjC,IAAjB,CAAsBkC,eAAeV,kBAAkBE,WAAjC,EAA8CC,UAA9C,CAAtB;AACH;;AAEDrD,sBAAMuD,KAAN,CAAYhE,GAAGuE,EAAf,IAAqB9D,MAAMuD,KAAN,CAAYhE,GAAGuE,EAAf,KAAsB,EAA3C;AACA9D,sBAAMuD,KAAN,CAAYhE,GAAGuE,EAAf,EAAmBC,MAAnB,CAA0BJ,gBAA1B;AAEH,aAhBD,MAgBO;AACH3D,sBAAMuD,KAAN,gBAAmBvD,MAAMuD,KAAzB,EAAmCK,eAAeV,kBAAkBE,WAAjC,EAA8CC,UAA9C,CAAnC;AACH;AACJ;;AAEDH,4BAAoBA,kBAAkBW,gBAAtC;AACH;;AAED,WAAO7D,KAAP;AACH;;AAED,SAASsD,aAAT,CAAuB5D,KAAvB,EAA8BI,YAA9B,EAA4C6C,KAA5C,EAAmD;AAC/C,QAAIF,cAAcC,eAAe5C,YAAf,EAA6B6C,KAA7B,CAAlB;;AAEA,QAAIF,gBAAgB,IAApB,EAA0B;AACtB,eAAO/C,KAAP;AACH;;AAED,WAAO+C,YAAY/C,KAAnB;AACH;;AAED,SAASgD,cAAT,CAAwB5C,YAAxB,EAAsC6C,KAAtC,EAA6C;AACzC,QAAIF,cAAc,IAAlB;AACA,QAAIuB,iBAAiB3B,kBAAkBM,KAAlB,CAArB;;AAEA,QAAIqB,mBAAmB,IAAvB,EAA6B;AACzB,YAAIC,mBAAmBnE,aAAaoE,IAAb,CAAkB;AAAA,mBAAUC,OAAO1C,EAAP,KAAcuC,cAAxB;AAAA,SAAlB,CAAvB;AACA,YAAIC,gBAAJ,EAAsB;AAClBxB,0BAAcwB,gBAAd;AACH;AACJ;;AAED,WAAOxB,WAAP;AACH;;AAED,SAAS1C,eAAT,CAAyBL,KAAzB,EAA6C;AAAA,QAAb0E,MAAa,uEAAJ,EAAI;;AACzC,QAAI1E,MAAMuB,YAAV,EAAwB;AACpBC,eAAOC,IAAP,CAAYzB,MAAMuB,YAAlB,EAAgCG,OAAhC,CAAwC,UAACC,GAAD,EAAS;AAC7C,gBAAI3B,MAAMuB,YAAN,CAAmBI,GAAnB,EAAwBC,MAA5B,EAAoC;AAChC8C,uBAAO1C,IAAP,CAAY;AACRhC,2BAAOA,MAAMuB,YAAN,CAAmBI,GAAnB,EAAwBC,MADvB;AAERG,wBAAIJ;AAFI,iBAAZ;AAIA+C,uBAAOL,MAAP,CAAchE,gBAAgBL,MAAMuB,YAAN,CAAmBI,GAAnB,EAAwBC,MAAxC,EAAgD8C,MAAhD,CAAd;AACH;AACJ,SARD;AASH;AACD,WAAOA,MAAP;AACH;;AAED,SAASR,cAAT,CAAwBR,WAAxB,EAAqCC,UAArC,EAAiD;AAC7C,QAAI,WAAWD,YAAYiB,KAA3B,EAAkC;AAC9BjB,oBAAYiB,KAAZ,GAAoB,IAApB;AACH;;AAED,WAAOC,oBAAoBlB,WAApB,EAAiCC,UAAjC,CAAP;AACH;;AAED,SAASiB,mBAAT,CAA6BlB,WAA7B,EAA0CC,UAA1C,EAAsD;AAClD,QAAIkB,cAAcC,eAAepB,YAAYT,KAA3B,EAAkCL,oBAAoBc,YAAYT,KAAhC,CAAlC,EAA0EU,UAA1E,CAAlB;;AAEA,YAAQD,YAAYqB,cAAZ,CAA2B9C,IAAnC;AACI,aAAK+C,yBAAeC,EAAf,CAAkBhD,IAAvB;AACI,uCACK4C,WADL,sBAEShF,GAAGqF,EAFZ,EAEiBxB,YAAYiB,KAAZ,CAAkBQ,KAAlB,CAAwB,GAAxB,EAA6BC,GAA7B,CAAiC;AAAA,uBAAOC,IAAIC,IAAJ,EAAP;AAAA,aAAjC,CAFjB;;AAMJ,aAAKN,yBAAeO,EAAf,CAAkBtD,IAAvB;AACI,uCACK4C,WADL,sBAEShF,GAAG2F,KAFZ,EAEoB9B,YAAYiB,KAAZ,CAAkBQ,KAAlB,CAAwB,GAAxB,EAA6BC,GAA7B,CAAiC;AAAA,uBAAOC,IAAIC,IAAJ,EAAP;AAAA,aAAjC,CAFpB;;AAMJ,aAAKN,yBAAeS,EAAf,CAAkBxD,IAAvB;AACI,uCACK4C,WADL,sBAEShF,GAAG6F,EAFZ,EAEiBhC,YAAYiB,KAF7B;;AAMJ,aAAKK,yBAAeW,EAAf,CAAkB1D,IAAvB;AACI,uCACK4C,WADL,sBAEShF,GAAG+F,EAFZ,EAEiBlC,YAAYiB,KAF7B;;AAMJ,aAAKK,yBAAea,EAAf,CAAkB5D,IAAvB;AACI,uCACK4C,WADL,sBAEShF,GAAGiG,EAFZ,EAEiBpC,YAAYiB,KAF7B;;AAMJ,aAAKK,yBAAee,EAAf,CAAkB9D,IAAvB;AACI,uCACK4C,WADL,sBAEShF,GAAGmG,EAFZ,EAEiBtC,YAAYiB,KAF7B;;AAMJ,aAAKK,yBAAeiB,EAAf,CAAkBhE,IAAvB;AACI,uCACK4C,WADL,sBAEShF,GAAGqG,EAFZ,EAEiBxC,YAAYiB,KAF7B;;AAMJ,aAAKK,yBAAemB,EAAf,CAAkBlE,IAAvB;AACI,uCACK4C,WADL,sBAEShF,GAAGuG,KAFZ,EAEoB,MAAM1C,YAAYiB,KAAlB,GAA0B,GAF9C;;AAMJ,aAAKK,yBAAeqB,EAAf,CAAkBpE,IAAvB;AACA;AACI,uCACK4C,WADL,sBAEShF,GAAGyG,EAFZ,EAEiB5C,YAAYiB,KAF7B;AA3DR;AAiEH;;AAED,SAAS4B,iBAAT,CAA2BvG,KAA3B,EAAkC;AAC9B,QAAIwG,aAAa,EAAjB;AACA,QAAIC,cAAcjF,OAAOC,IAAP,CAAYzB,MAAM0G,qBAAlB,CAAlB;;AAEA,SAAK,IAAIjE,IAAI,CAAb,EAAgBA,IAAIgE,YAAYtE,MAAhC,EAAwCM,GAAxC,EAA6C;AACzC,YAAIkE,aAAaF,YAAYhE,CAAZ,CAAjB;AACA+D,mBAAWxE,IAAX,CAAgBhC,MAAM0G,qBAAN,CAA4BC,UAA5B,EAAwCC,SAAxD;AACH;;AAED,WAAOJ,UAAP;AACH;;AAED,SAAS1B,cAAT,CAAwB+B,aAAxB,EAAuC5D,KAAvC,EAA8CU,UAA9C,EAA0D;AACtD,QAAI8C,cAAcjF,OAAOC,IAAP,CAAYkC,WAAW+C,qBAAvB,CAAlB;AACA,QAAII,sBAAsB,EAA1B;;AAEA,SAAK,IAAIrE,IAAI,CAAb,EAAgBA,IAAIgE,YAAYtE,MAAhC,EAAwCM,GAAxC,EAA6C;AACzC,YAAIkE,aAAaF,YAAYhE,CAAZ,CAAjB;;AAEA,YAAIkB,WAAW+C,qBAAX,CAAiCC,UAAjC,EAA6CC,SAA7C,KAA2D3D,KAA/D,EAAsE;AAClE6D,kCAAsBH,UAAtB;AACA;AACH;AACJ;;AAED,QAAII,wBAAwBF,cAAc1B,KAAd,CAAoB,GAApB,CAA5B;AACA4B,0BAAsBA,sBAAsB5E,MAAtB,GAA+B,CAArD,IAA0D2E,mBAA1D;;AAEA,QAAIC,sBAAsB5E,MAAtB,KAAiC,CAArC,EAAwC;AACpC4E,8BAAsBC,MAAtB,CAA6B,CAA7B,EAAgC,CAAhC,EAAmCrD,WAAW1B,IAA9C;AACH;;AAED,WAAO,MAAM8E,sBAAsBE,IAAtB,CAA2B,GAA3B,CAAN,GAAwC,GAA/C;AACH;;AAED,SAAStE,iBAAT,CAA2BM,KAA3B,EAAkC;AAC9B,QAAIiE,SAASjE,MAAMkC,KAAN,CAAY,GAAZ,CAAb;;AAEA,QAAI+B,OAAO/E,MAAP,KAAkB,CAAtB,EAAyB;AACrB,eAAO,IAAP;AACH;;AAED,WAAO+E,OAAOA,OAAO/E,MAAP,GAAgB,CAAvB,CAAP;AACH;;AAED,SAASS,mBAAT,CAA6BK,KAA7B,EAAoC;AAChC,QAAIiE,SAASjE,MAAMkC,KAAN,CAAY,GAAZ,CAAb;AACA,WAAO+B,OAAOA,OAAO/E,MAAP,GAAgB,CAAvB,CAAP;AACH;;kBAEc,EAAEpC,sBAAF,E","file":"query.builder.js","sourceRoot":"../../../../../../.."}